<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>KLANmart - Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../lib/jquery.mobile-1.4.5.min.css" />
    <script src="../lib/jquery-1.11.1.min.js"></script>
    <script src="../lib/jquery.mobile-1.4.5.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../style/login.css">
    <script>
        function goToSignUp() {
            document.location.href = "./register.html";
        }

        function loginBtn() {
            let email = document.getElementById("txtEmailId").value;
            let password = document.getElementById("txtPassword").value;

            if (email == "") {
                console.log("no username");
            } else if (password == "") {
                console.log("no pass");
            } else {
                console.log(email, password);

                let jsonData = {
                    "User": {
                        "email": email, "password": password
                    }
                };

                let xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {

                        var jsonObj = JSON.parse(this.responseText);
                        console.log(jsonObj.data);
                        sessionStorage.setItem("logged_user", JSON.stringify(jsonObj.data));
                        alert(jsonObj.status);

                        window.location = "./profile.html";

                    }
                };
                xhttp.open("POST", "http://localhost:9002/KLANmart/login", true);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.send(JSON.stringify(jsonData));
            }

        }

    </script>
</head>

<body>
    <div data-role="content" data-theme="a" class="content-body">
        <div>
            <img src="../assets/logo/logo-blue.png" style="width:65%;" class="logo-image">
        </div>

        <div class="login-container">
            <div class="ui-a-grid">
                <h1 class="welcome-txt" style="font-weight: 100;">Welcome</h1>
                <p class="login-txt">Sign In to your KLANmart account</p>
            </div>
            <div class="ui-field-contain">
                <div class="ui-b-grid">

                    <input type="email" name="textEmail" id="txtEmailId" placeholder="Email Id*" value=""
                        data-corners="false" data-clear-btn="true" data-wrapper-class="inputWrapper" style="padding-top: 15px !important; padding-bottom: 8px;
                    padding-right: 15px;padding-left: 15px;">


                    <input type="password" name="textPasseord" id="txtPassword" placeholder="Password*" value=""
                        data-corners="false" data-clear-btn="true" data-wrapper-class="inputWrapper">

                    <p class="forgot-pw-txt">Forgot password?</p>

                    <button class="login-btn" data-corners="false" data-shadow="false" onclick="loginBtn()">SIGN
                        IN</button>
                </div>
                <p class="sign-in-with-txt">or Sign in with</p>
                <div class="ui-c-grid">

                    <button class="ui-btn ui-mini sign-face-book-btn">
                        <i class="fa fa-facebook fa-fw"></i>
                        &nbsp; Sign In with Facebook</button>

                    <button class="ui-btn ui-mini sign-google-acc-btn">
                        <i class="fa fa-google fa-fw">
                        </i> &nbsp; Sign In with Google</button>
                </div>
            </div>

        </div>

        <p class="dont-hv-acc" onclick="goToSignUp()">Don't have an account? <strong>Sign Up</strong></p>

    </div>
</body>

</html>