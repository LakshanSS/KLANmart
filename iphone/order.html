<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>KLANmart - order</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../lib/jquery.mobile-1.4.5.min.css" />
    <script src="../lib/jquery-1.11.1.min.js"></script>
    <script src="../lib/jquery.mobile-1.4.5.min.js"></script>
    <script src="https://kit.fontawesome.com/2d990cff29.js" crossorigin="anonymous"></script>
    <script src="../js/common.js"></script>

    <script>
        window.onload = function () {
            var loggedUser = sessionStorage.getItem("logged_user");
            var myJson = JSON.parse(loggedUser);
            $(document).ready(function () {
                $.ajax({
                    url: "http://localhost:9002/KLANmart/orders/" + myJson.user_id
                }).then(function (data) {
                    console.log(data.result);

                    var i;
                    for (i = 0; i < data.result.length; i++) {

                        if (data.result[i].order_status != 'cart') {
                            var favouriteRow = document.createElement('div');
                            var favouriteItems = document.getElementsByClassName('f-main-content')[0];
                            console.log(favouriteItems);
                            // ${data.result[i].images}
                            let firstImageURL = JSON.parse(data.result[i].images)[0];
                            console.log(firstImageURL);
                            var favouriteContents = `
                    <div class="post">
                        <img src=${firstImageURL} class="post-image">
                        <div onclick="goToFeedback()" class="post-preview">
                            <h3>${data.result[i].product_name}</h3>
                            <p class="store-detail"><strong>Store</strong> ${data.result[i].store_name}</p> 
                            <p class="status-order"> ${data.result[i].order_status}</p>
                            <p class="date-order"><i class="far fa-calendar-alt"></i>  ${data.result[i].order_time}</p>
                        </div>
                    </div>`;
                            favouriteRow.innerHTML = favouriteContents;
                            favouriteItems.append(favouriteRow);
                        }
                    }
                });
            });
        }

    </script>

    <style>
        .header-bar {
            background-color: rgb(12, 64, 161) !important;
            height: 60px !important;
        }

        .header-bar .back-icon {
            float: left;
            margin-top: 22px;
            margin-left: 15px;
            color: white;
        }

        .header-bar .page-detail {
            color: white;
            letter-spacing: 2px;
            font-weight: 100;
            font-size: 17px;
            margin-top: 8px;
            text-shadow: none !important;
        }

        .content-body {
            background-color: rgb(247, 251, 255) !important;
        }

        /* CONTENT */
        .content {
            width: 100%;
            margin: 1px auto 30px;
            /* border: 1px solid red; */
        }

        .clearfix::after {
            content: "";
            display: block;
            clear: both;
        }

        .content .f-main-content {
            width: 100%;
            float: left;
        }

        .content .f-main-content .post {
            border: 1px solid rgb(164, 188, 231) !important;
            width: 97%;
            height: 104px;
            margin: 10px auto;
            background: rgb(255, 255, 255);
            position: relative;
            box-shadow: 0 4px 4px 0 rgba(240, 239, 239, 0.2), 0 6px 10px 0 rgba(185, 183, 183, 0.19);
        }

        .content .f-main-content .post .post-image {
            width: 30%;
            height: 85%;
            float: left;
            margin-top: 8px;
            margin-left: 14px;
            margin-bottom: auto;
            border: 1px solid rgb(164, 188, 231) !important;
        }

        .content .f-main-content .post .post-preview {
            width: 60%;
            height: 66%;
            padding: 1px;
            float: right;
            margin-top: -10px;
        }

        .content .f-main-content .post .post-preview .store-detail {
            color: rgb(6, 6, 68);
            font-size: 14px;
            margin-top: -6px;
            margin-bottom: -3px;
        }

        .content .f-main-content .post .post-preview .price-tag {
            margin-top: 10px;
            font-size: 15px;
            float: left;

        }

        .content .f-main-content .post .post-preview .heart-icon {
            float: right;
            font-size: 30px;
            margin-top: -49px;
            color: rgb(219, 15, 15);
        }

        .content .f-main-content .favourite-title {
            margin: 20px;
        }

        h3 {
            font-size: 14px;
            margin-top: 18px;
        }

        .status-order {
            margin-top: 8px;
            font-size: 14px;
            /*float: left;*/
        }

        .date-order {
            /*float: left;
            margin-top: 9px;*/
            font-size: 13px;
            /* margin-right: 7px; */
            /*margin-left: 14px;*/
        }

        @media all and (min-width: 40em) {
            .content {
                width: 80%;
            }

            .content .f-main-content .post .post-image {
                margin-top: 6px;
            }

            .content .f-main-content .post {
                height: 90px;
            }

            .content .f-main-content .post .post-preview .store-detail {
                margin-top: -5px;
            }

            /*.date-order {
                margin-left: 18px;
            }*/
        }
    </style>
</head>

<body>
    <div data-role="header" data-position="fixed" class="header-bar">
        <i onclick="profile()" class="fas fa-chevron-left back-icon"></i>
        <h1 class="page-detail">My Orders</h1>
    </div>

    <div data-role="content" data-theme="a">
        <!-- <div id="if_not_logged_favourite" style="background: #f9f9f9 !important;">
            <i class="far fa-user-circle" style="
                        margin-top: 145px !important;"></i>
            <p style="text-align: center; font-size: 15px;" onclick="startJourney()">You don't have an account,<br>
                <strong style="color: rgb(16, 57, 146);">Sign up</strong> with KLANmart to access more featues.</p>
        </div> -->


        <div id="if_logged_favourite">
            <div class="content clearfix">
                <div class="f-main-content">
                    <!-- <div class="post">
                        <img src="../assets/images/favourite/tshirt1-blue.png" alt="" srcset="" class="post-image">

                        <div class="post-preview">
                            <h3>Men's Long Sleeve Rounded Neck T-Shirt</h3>
                            <p class="store-detail"><strong>Store</strong> Trendy Fashion Store</p>
                            <p class="status-order"><i class="fas fa-star"></i> delivered</p>
                            <p class="date-order"><i class="far fa-calendar-alt"></i> 12-06-2019</p>
                        </div>

                    </div> -->
                    <!-- <div class="post">
                        <img src="../assets/images/favourite/image2.jpeg" alt="" srcset="" class="post-image">
                        <div class="post-preview">
                            <h3>Hayiou gt1 Touch Blutooth Earphones</h3>
                            <p class="store-detail"><strong>Store</strong> 3C Global Tradings</p>
                            <p class="status-order"><i class="fas fa-star"></i> delivered</p>
                            <p class="date-order"><i class="far fa-calendar-alt"></i> 12-06-2019</p>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</body>

</html>